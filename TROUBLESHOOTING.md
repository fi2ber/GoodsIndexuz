# Решение проблем с админ-панелью

## Проблема: Админ-панель не доступна

### Проверка 1: Сервер запущен?

```bash
# Проверьте, запущен ли dev сервер
lsof -ti:3000

# Если нет, запустите
npm run dev
```

### Проверка 2: Страница логина доступна?

Откройте в браузере: http://localhost:3000/admin/login

Должна отобразиться форма входа с полями:
- Email
- Password
- Кнопка "Login"

### Проверка 3: Данные для входа

- **Email:** `admin`
- **Password:** `admin`

### Проверка 4: Ошибки в консоли браузера

Откройте DevTools (F12) и проверьте:
- Console - есть ли ошибки JavaScript?
- Network - успешно ли загружаются ресурсы?
- Application → Cookies - есть ли cookie `admin_session` после входа?

### Проверка 5: Ошибки на сервере

Проверьте терминал, где запущен `npm run dev`:
- Есть ли ошибки при загрузке страницы?
- Есть ли ошибки при попытке входа?

### Проверка 6: База данных

```bash
# Проверьте, что PostgreSQL запущен
docker compose ps

# Проверьте подключение
npm run db:check
```

### Решение: Перезапуск

Если ничего не помогает:

```bash
# Остановите сервер (Ctrl+C)
# Перезапустите
npm run dev
```

### Решение: Очистка кэша

```bash
# Удалите .next папку
rm -rf .next

# Перезапустите
npm run dev
```

### Решение: Проверка админ-пользователя

```bash
# Создайте админ-пользователя заново
npm run db:admin
```

## Частые ошибки

### 1. "Cannot read property of undefined"

**Причина:** Проблема с подключением к БД

**Решение:**
```bash
# Проверьте Docker
docker compose ps

# Перезапустите PostgreSQL
npm run docker:restart
```

### 2. Редирект на /admin/login при попытке входа

**Причина:** Неправильная установка cookie или проблема с сессией

**Решение:**
- Проверьте, что `DATABASE_URL` правильный в `.env.local`
- Очистите cookies в браузере
- Попробуйте войти снова

### 3. Страница не загружается (белый экран)

**Причина:** Ошибка JavaScript или проблема с компонентами

**Решение:**
- Откройте DevTools → Console
- Проверьте ошибки
- Убедитесь, что все зависимости установлены: `npm install`

## Логи для отладки

Добавьте логирование в `app/api/auth/login/route.ts`:

```typescript
console.log("Login attempt:", { email });
console.log("Result:", result);
```

## Контакты для помощи

Если проблема не решена:
1. Проверьте логи сервера
2. Проверьте логи браузера
3. Убедитесь, что все зависимости установлены
4. Убедитесь, что Docker и PostgreSQL запущены

